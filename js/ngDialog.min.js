/*! ng-dialog - v0.3.12 (https://github.com/likeastore/ngDialog) */
!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){"use strict";var b,c=a.module("ngDialog",[]),d=a.element,e=a.isDefined,f=(document.body||document.documentElement).style,g=e(f.animation)||e(f.WebkitAnimation)||e(f.MozAnimation)||e(f.MsAnimation)||e(f.OAnimation),h="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)},j=!1;return c.provider("ngDialog",function(){var c=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0};this.setForceBodyReload=function(a){j=a||!1},this.setDefaults=function(b){a.extend(c,b)};var e,f=0,k=0,l={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller",function(m,n,o,p,q,r,s,t,u){var v=m.find("body");j&&r.$on("$locationChangeSuccess",function(){v=m.find("body")});var w={onDocumentKeydown:function(a){27===a.keyCode&&x.close("$escape")},setBodyPadding:function(a){var b=parseInt(v.css("padding-right")||0,10);v.css("padding-right",b+a+"px"),v.data("ng-dialog-original-padding",b)},resetBodyPadding:function(){var a=v.data("ng-dialog-original-padding");a?v.css("padding-right",a+"px"):v.css("padding-right","")},performCloseDialog:function(a,c){var d=a.attr("id");if("undefined"!=typeof t.Hammer){var f=b.hammerTime;f.off("tap",e),f.destroy&&f.destroy(),delete b.hammerTime}else a.unbind("click");1===k&&v.unbind("keydown"),a.hasClass("ngdialog-closing")||(k-=1),r.$broadcast("ngDialog.closing",a),k=0>k?0:k,g?(b.$destroy(),a.unbind(h).bind(h,function(){a.remove(),0===k&&(v.removeClass("ngdialog-open"),w.resetBodyPadding()),r.$broadcast("ngDialog.closed",a)}).addClass("ngdialog-closing")):(b.$destroy(),a.remove(),0===k&&(v.removeClass("ngdialog-open"),w.resetBodyPadding()),r.$broadcast("ngDialog.closed",a)),l[d]&&(l[d].resolve({id:d,value:c,$dialog:a,remainingDialogs:k}),delete l[d])},closeDialog:function(b,c){var d=b.data("$ngDialogPreCloseCallback");if(d&&a.isFunction(d)){var e=d.call(b,c);a.isObject(e)?e.closePromise?e.closePromise.then(function(){w.performCloseDialog(b,c)}):e.then(function(){w.performCloseDialog(b,c)},function(){}):e!==!1&&w.performCloseDialog(b,c)}else w.performCloseDialog(b,c)}},x={open:function(g){function h(a,b){return q.get(a,b||{}).then(function(a){return a.data||""})}function j(b){return b?a.isString(b)&&s.plain?b:"boolean"!=typeof s.cache||s.cache?n.get(b)||h(b,{cache:!0}):h(b,{cache:!1}):"Empty template"}var m=this,s=a.copy(c);g=g||{},a.extend(s,g),f+=1,m.latestID="ngdialog"+f;var y;l[m.latestID]=y=p.defer(),b=a.isObject(s.scope)?s.scope.$new():r.$new();var z,A;return p.when(j(s.template||s.templateUrl)).then(function(c){if(n.put(s.template||s.templateUrl,c),s.showClose&&(c+='<div class="ngdialog-close"></div>'),m.$result=z=d('<div id="ngdialog'+f+'" class="ngdialog"></div>'),z.html(s.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content">'+c+"</div>":'<div class="ngdialog-content">'+c+"</div>"),s.data&&a.isString(s.data)){var g=s.data.replace(/^\s*/,"")[0];b.ngDialogData="{"===g||"["===g?a.fromJson(s.data):s.data}else s.data&&a.isObject(s.data)&&(b.ngDialogData=s.data);if(s.controller&&(a.isString(s.controller)||a.isArray(s.controller)||a.isFunction(s.controller))){var h=u(s.controller,{$scope:b,$element:z});z.data("$ngDialogControllerController",h)}if(s.className&&z.addClass(s.className),A=s.appendTo&&a.isString(s.appendTo)?a.element(document.querySelector(s.appendTo)):v,s.preCloseCallback){var j;a.isFunction(s.preCloseCallback)?j=s.preCloseCallback:a.isString(s.preCloseCallback)&&b&&(a.isFunction(b[s.preCloseCallback])?j=b[s.preCloseCallback]:b.$parent&&a.isFunction(b.$parent[s.preCloseCallback])?j=b.$parent[s.preCloseCallback]:r&&a.isFunction(r[s.preCloseCallback])&&(j=r[s.preCloseCallback])),j&&z.data("$ngDialogPreCloseCallback",j)}if(b.closeThisDialog=function(a){w.closeDialog(z,a)},i(function(){o(z)(b);var a=t.innerWidth-v.prop("clientWidth");v.addClass("ngdialog-open");var c=a-(t.innerWidth-v.prop("clientWidth"));c>0&&w.setBodyPadding(c),A.append(z),s.name?r.$broadcast("ngDialog.opened",{dialog:z,name:s.name}):r.$broadcast("ngDialog.opened",z),r.$apply()}),s.closeByEscape&&v.bind("keydown",w.onDocumentKeydown),s.closeByNavigation&&r.$on("$locationChangeSuccess",function(){w.closeDialog(z)}),e=function(a){var b=s.closeByDocument?d(a.target).hasClass("ngdialog-overlay"):!1,c=d(a.target).hasClass("ngdialog-close");(b||c)&&x.close(z.attr("id"),c?"$closeButton":"$document")},"undefined"!=typeof t.Hammer){var l=b.hammerTime=t.Hammer(z[0]);l.on("tap",e)}else z.bind("click",e);return k+=1,x}),{id:"ngdialog"+f,closePromise:y.promise,close:function(a){w.closeDialog(z,a)}}},openConfirm:function(b){var c=p.defer(),e={closeByEscape:!1,closeByDocument:!1};a.extend(e,b),e.scope=a.isObject(e.scope)?e.scope.$new():r.$new(),e.scope.confirm=function(a){c.resolve(a);var b=d(document.getElementById(f.id));w.performCloseDialog(b,a)};var f=x.open(e);return f.closePromise.then(function(a){return a?c.reject(a.value):c.reject()}),c.promise},close:function(a,b){var c=d(document.getElementById(a));return c.length?w.closeDialog(c,b):x.closeAll(b),x},closeAll:function(b){var c=document.querySelectorAll(".ngdialog");a.forEach(c,function(a){w.closeDialog(d(a),b)})},getDefaults:function(){return c}};return x}]}),c.directive("ngDialog",["ngDialog",function(b){return{restrict:"A",scope:{ngDialogScope:"="},link:function(c,d,e){d.on("click",function(d){d.preventDefault();var f=a.isDefined(c.ngDialogScope)?c.ngDialogScope:"noScope";a.isDefined(e.ngDialogClosePrevious)&&b.close(e.ngDialogClosePrevious);var g=b.getDefaults();b.open({template:e.ngDialog,className:e.ngDialogClass||g.className,controller:e.ngDialogController,scope:f,data:e.ngDialogData,showClose:"false"===e.ngDialogShowClose?!1:"true"===e.ngDialogShowClose?!0:g.showClose,closeByDocument:"false"===e.ngDialogCloseByDocument?!1:"true"===e.ngDialogCloseByDocument?!0:g.closeByDocument,closeByEscape:"false"===e.ngDialogCloseByEscape?!1:"true"===e.ngDialogCloseByEscape?!0:g.closeByEscape,preCloseCallback:e.ngDialogPreCloseCallback||g.preCloseCallback})})}}}]),c});